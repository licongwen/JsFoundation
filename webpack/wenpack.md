# Webpack知识点

学习笔记，[参考](https://segmentfault.com/a/1190000015088834)

## 基本概念

1. Entry：入口文件，webpack执行构建的第一步将从Entry开始；

2. Module: 模块，在webpack里一切皆为模块，一个模块对应着一个文件，webpack会从配置的Entry开始递归找出所有依赖的模块。

3. Chunk: 代码块，一个chunck由多个模块组合而成，用于代码合并与分割；

4. Loader： 模块转换器，用于将模块内容按照需求转换成新的内容，比如将TypeScript转化为Js；

5. Plugin ：扩展插件，在Webpack构建流程中的特定时机会广播出对应的事件，插件可以监听这些事件的发生，在特定时机做对应的事情。

## 流程概括

webpack的流程是一个串行的过程，从启动到结束会依次执行以下的流程：

1. 初始化参数：从配置文件和shell语句中读取与合并参数，得出最终的参数；

2. 开始编译：利用得到的参数初始化Compiler对象，加载所有进行翻译，执行对象的run方法开始执行编译；

3. 确定入口： 根据配置中的entry找到入口文件；

4. 编译模块：从入口文件出发，调用所有配置的Loder对模块进行翻译，在找出改模块依赖的模块，在递归本步骤直到所有入口依赖的文件都经过了Loader处理；

5. 完成模块的编译：在经历第4步之后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；

6. 输出资源： 根据入口和模块之间的依赖关系，组装成一个个包含多个模块的Chunk,再把每个Chunk转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；

7. 输出完成，再确定好输出内容后，再根据配置输出的路径和文件名，把文件内容写到文件系统；

再以上过程中，Webpack会在特定的时间点广播初特定的事件，插件（Plugin）再监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用Webpack提供的api来改变Webpack的运行结果。